/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package ui;

import java.util.ArrayList;
import javax.swing.JOptionPane;
import model.EmpDetail;
import model.EmpDetailsList;

/**
 *
 * @author amretasrerengarajan
 */
public class SearchPanel extends javax.swing.JPanel {

    /**
     * Creates new form SearchPanel
     */
    
    EmpDetailsList empList;
    String search;
    int searchValue;
    boolean validSearch;
    
    public SearchPanel(EmpDetailsList empList) {
        initComponents();
        rdBtnSearchType.add(rdBtnEmpId);
        rdBtnSearchType.add(rdBtnName);
        rdBtnSearchType.add(rdBtnPos);
        rdBtnSearchType.add(rdBtnLevel);
        rdBtnSearchType.add(rdBtnTeam);
        this.empList = empList;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        rdBtnSearchType = new javax.swing.ButtonGroup();
        lblTitle = new javax.swing.JLabel();
        searchArea = new javax.swing.JPanel();
        splitPane = new javax.swing.JSplitPane();
        searchTypeArea = new javax.swing.JPanel();
        lblSearch = new javax.swing.JLabel();
        rdBtnName = new javax.swing.JRadioButton();
        rdBtnLevel = new javax.swing.JRadioButton();
        rdBtnTeam = new javax.swing.JRadioButton();
        rdBtnPos = new javax.swing.JRadioButton();
        rdBtnEmpId = new javax.swing.JRadioButton();
        txtSearchField = new javax.swing.JTextField();
        lblSearchField1 = new javax.swing.JLabel();
        btnSearch = new javax.swing.JButton();
        searchBox = new javax.swing.JPanel();

        lblTitle.setFont(new java.awt.Font("Helvetica Neue", 0, 24)); // NOI18N
        lblTitle.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTitle.setText("Search Employee Details");

        lblSearch.setText("Search Type:");

        rdBtnName.setText("Name ");
        rdBtnName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdBtnNameActionPerformed(evt);
            }
        });

        rdBtnLevel.setText("Level");
        rdBtnLevel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdBtnLevelActionPerformed(evt);
            }
        });

        rdBtnTeam.setText("Team");
        rdBtnTeam.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdBtnTeamActionPerformed(evt);
            }
        });

        rdBtnPos.setText("Position");
        rdBtnPos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdBtnPosActionPerformed(evt);
            }
        });

        rdBtnEmpId.setText("Employee ID");
        rdBtnEmpId.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdBtnEmpIdActionPerformed(evt);
            }
        });

        lblSearchField1.setText("Search:");

        btnSearch.setText("Search");
        btnSearch.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSearchActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout searchTypeAreaLayout = new javax.swing.GroupLayout(searchTypeArea);
        searchTypeArea.setLayout(searchTypeAreaLayout);
        searchTypeAreaLayout.setHorizontalGroup(
            searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchTypeAreaLayout.createSequentialGroup()
                .addGroup(searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(searchTypeAreaLayout.createSequentialGroup()
                        .addGap(50, 50, 50)
                        .addGroup(searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(searchTypeAreaLayout.createSequentialGroup()
                                .addComponent(lblSearchField1)
                                .addGap(18, 18, 18)
                                .addComponent(txtSearchField, javax.swing.GroupLayout.PREFERRED_SIZE, 237, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(rdBtnPos, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(rdBtnTeam, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(rdBtnLevel, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(rdBtnName, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(searchTypeAreaLayout.createSequentialGroup()
                                    .addComponent(lblSearch)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(rdBtnEmpId)))))
                    .addGroup(searchTypeAreaLayout.createSequentialGroup()
                        .addGap(164, 164, 164)
                        .addComponent(btnSearch)))
                .addContainerGap(606, Short.MAX_VALUE))
        );
        searchTypeAreaLayout.setVerticalGroup(
            searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchTypeAreaLayout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addGroup(searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSearch)
                    .addComponent(rdBtnEmpId))
                .addGap(18, 18, 18)
                .addComponent(rdBtnName)
                .addGap(18, 18, 18)
                .addComponent(rdBtnLevel)
                .addGap(18, 18, 18)
                .addComponent(rdBtnTeam)
                .addGap(18, 18, 18)
                .addComponent(rdBtnPos)
                .addGap(123, 123, 123)
                .addGroup(searchTypeAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtSearchField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblSearchField1))
                .addGap(30, 30, 30)
                .addComponent(btnSearch)
                .addContainerGap(165, Short.MAX_VALUE))
        );

        splitPane.setLeftComponent(searchTypeArea);

        javax.swing.GroupLayout searchBoxLayout = new javax.swing.GroupLayout(searchBox);
        searchBox.setLayout(searchBoxLayout);
        searchBoxLayout.setHorizontalGroup(
            searchBoxLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 684, Short.MAX_VALUE)
        );
        searchBoxLayout.setVerticalGroup(
            searchBoxLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 563, Short.MAX_VALUE)
        );

        splitPane.setRightComponent(searchBox);

        javax.swing.GroupLayout searchAreaLayout = new javax.swing.GroupLayout(searchArea);
        searchArea.setLayout(searchAreaLayout);
        searchAreaLayout.setHorizontalGroup(
            searchAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchAreaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(splitPane)
                .addContainerGap())
        );
        searchAreaLayout.setVerticalGroup(
            searchAreaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchAreaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(splitPane, javax.swing.GroupLayout.PREFERRED_SIZE, 563, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(607, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblTitle, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(searchArea, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lblTitle)
                .addGap(18, 18, 18)
                .addComponent(searchArea, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void rdBtnEmpIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdBtnEmpIdActionPerformed
        // TODO add your handling code here:
        //        searchFieldValidation(txtSearchField.getText());
//        SearchBoxPanel searchBoxCmp = new SearchBoxPanel();
//        splitPane.setRightComponent(searchBoxCmp);
        
        rdBtnEmpId.setActionCommand("EmpId");
//        searchType = rdBtnEmpId.getActionCommand(); 
        
    }//GEN-LAST:event_rdBtnEmpIdActionPerformed

    private void rdBtnLevelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdBtnLevelActionPerformed
        // TODO add your handling code here:
        rdBtnLevel.setActionCommand("Level");
//        searchType = rdBtnLevel.getSelection().getActionCommand();
    }//GEN-LAST:event_rdBtnLevelActionPerformed

    private void rdBtnNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdBtnNameActionPerformed
        // TODO add your handling code here:
        rdBtnName.setActionCommand("Name");
    }//GEN-LAST:event_rdBtnNameActionPerformed

    private void rdBtnTeamActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdBtnTeamActionPerformed
        // TODO add your handling code here:
        rdBtnTeam.setActionCommand("Team");
    }//GEN-LAST:event_rdBtnTeamActionPerformed

    private void rdBtnPosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdBtnPosActionPerformed
        // TODO add your handling code here:
        rdBtnPos.setActionCommand("Position");
    }//GEN-LAST:event_rdBtnPosActionPerformed

    private void btnSearchActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSearchActionPerformed
        // TODO add your handling code here:
        EmpDetail searchResult = null;
        ArrayList<EmpDetail> searchResultsList = new ArrayList<EmpDetail>();
        TableJPanel tablePanel = null;
//        TableJPanel tablePanel;
        validSearch = searchFieldValidation(txtSearchField.getText());
        for (int i = 0; i < empList.checkSize(); i++) {
            if (validSearch) {
                if (rdBtnSearchType.getSelection().getActionCommand() == "EmpId") {
                    searchResult = (EmpDetail) empList.searchEmpDetailsWithInt(rdBtnSearchType.getSelection().getActionCommand(), searchValue);
                    tablePanel = new TableJPanel(searchResult);
                } else if (rdBtnSearchType.getSelection().getActionCommand() == "Name") {
                    searchResultsList = empList.searchDetailWithName(search);
                    System.out.println(searchResultsList.toString());
                    tablePanel = new TableJPanel(searchResultsList);
                } else if (rdBtnSearchType.getSelection().getActionCommand() == "Level") {
                    searchResultsList = empList.searchDetailWithLevel(search);
                    tablePanel = new TableJPanel(searchResultsList);
                }else if (rdBtnSearchType.getSelection().getActionCommand() == "Position") {
                    searchResultsList = empList.searchDetailWithPosition(search);
                    tablePanel = new TableJPanel(searchResultsList);
                }
                else  {
                    JOptionPane.showMessageDialog(this, "No Search Results Found");
                }
            }
        }
//        TableJPanel tablePanel = new TableJPanel(searchResult);
        splitPane.setRightComponent(tablePanel);
    }//GEN-LAST:event_btnSearchActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnSearch;
    private javax.swing.JLabel lblSearch;
    private javax.swing.JLabel lblSearchField1;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JRadioButton rdBtnEmpId;
    private javax.swing.JRadioButton rdBtnLevel;
    private javax.swing.JRadioButton rdBtnName;
    private javax.swing.JRadioButton rdBtnPos;
    private javax.swing.ButtonGroup rdBtnSearchType;
    private javax.swing.JRadioButton rdBtnTeam;
    private javax.swing.JPanel searchArea;
    private javax.swing.JPanel searchBox;
    private javax.swing.JPanel searchTypeArea;
    private javax.swing.JSplitPane splitPane;
    private javax.swing.JTextField txtSearchField;
    // End of variables declaration//GEN-END:variables

//    private boolean isNumeric(int searchValue) {
//        throw new UnsupportedOperationException("Not supported yet."); // Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/GeneratedMethodBody
//    }
    
    
    private boolean searchFieldValidation(String searchText) {
        boolean result = false;
        if(rdBtnSearchType.getSelection().getActionCommand().equals("EmpId") ) {
            try {
                searchValue = Integer.parseInt(searchText);
                result = true;
            } catch (NumberFormatException e) {
                JOptionPane.showMessageDialog(this, "Enter a valid value!");
                txtSearchField.setText("");
            }
        } else {
            search = txtSearchField.getText();
            result = true;
        }
        return result; 
    }
}
